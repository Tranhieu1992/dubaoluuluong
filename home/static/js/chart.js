const ls = [374.311882,
    317.132196,
    289.8431,
    306.798691,
    393.063206,
    654.81641,
    1023.237806,
    1178.66996,
    976.621862,
    787.72764,
    630.707054,
    511.117605,
    421.503109,
    358.887191,
    324.630255,
    333.606925,
    417.312983,
    629.429497,
    938.269208,
    1089.532487,
    984.56011,
    805.5953,
    651.834311,
    532.973826,
    443.121272,
    379.157247,
    342.669786,
    347.3392,
    417.465021,
    594.968504,
    876.576338,
    1046.466614,
    981.40716,
    816.716418,
    667.430816,
    549.535596,
    458.667145,
    393.287183,
    354.804761,
    354.984452,
    414.985275,
    572.795741,
    832.734469,
    1013.314174,
    976.252393,
    824.442959,
    678.704879,
    561.520885,
    470.185754,
    403.635562,
    363.508722,
    360.077055,
    412.561062,
    557.694335,
    801.475498,
    987.845888,
    970.619924,
    829.495385,
    686.831431,
    570.271568,
    478.806074,
    411.406586,
    370.034093,
    363.740801,
    410.762509,
    546.437783,
    777.53858,
    966.287961,
    964.871854,
    833.350325,
    693.312205,
    577.444812,
    485.927836,
    417.806269,
    375.461144,
    366.620985,
    409.367765,
    537.022,
    757.642582,
    948.14898,
    958.97951,
    836.72167,
    699.232656,
    583.680105,
    492.086147,
    423.352435,
    380.170962,
    369.216473,
    408.401083,
    529.299568,
    740.749254,
    932.385137,
    953.538008,
    839.247316,
    704.185349,
    589.1632,
    497.441515,
    428.17944,
    384.359048,
    371.575746,
    407.894027,
    523.174408,
    727.327797,
    919.044941,
    948.76393,
    841.028472,
    708.157476,
    593.70381,
    501.885508,
    432.199735,
    387.870756,
    373.59326,
    407.715583,
    518.402653,
    716.675994,
    907.958389,
    944.570914,
    842.344846,
    711.39962,
    597.420257,
    505.571751,
    435.532999,
    390.791315,
    375.341974,
    407.727285,
    514.30634,
    707.777241,
    898.625454,
    940.885182,
    843.343544,
    714.176528,
    600.67022,
    508.753516,
    438.400546,
    393.276784,
    376.841693,
    407.719125,
    510.866202,
    700.212541,
    890.596085,
    937.47995,
    844.058908,
    716.560167,
    603.470135,
    511.540425,
    440.909674,
    395.454694,
    378.1813,
    407.80404,
    508.03801,
    693.593727,
    883.468628,
    934.18726,
    844.439823,
    718.520844,
    605.861084,
    513.949706,
    443.11314,
    397.387916,
    379.424403,
    407.991013,
    505.718291,
    687.928674,
    877.156041,
    931.06797,
    844.587497,
    720.118286,
    607.888571
    ];
function myFunction(list1,p) {
    let k = [];
    q = p - 2010; 
    for (let i = (q-1)*12; i < 12*q; i++) {
            k.push(list1[i]);
        }
    return k;
}

const ctx = document.getElementById('myChart');
new Chart(ctx, {
    type: 'line',
    data: {
    labels: ['1', '2', '3', '4', '5', '6','7','8','9','10','11','12'],
    datasets:[
        {
          label: 'predict',
          data: [384.123086
            ,311.470911
            ,266.077018
            ,258.113553
            ,327.580110
            ,556.163930
            ,969.267964
            ,1208.148568
            ,1081.962460
            ,867.483784
            ,681.688224
            ,543.604661],
          yAxisID: 'y',
          tension: 0.4,
        },
        {
          label: 'actual',
          data: [
            286.48387097,
            157.70714286,
            141.91935484,
            137.20511667,
            287.12822581,
            521.21496296,
            834.38857143,
            1187.75411111,
            959.374433,1050.342952,509.904900,407.505355
        ],
          yAxisID: 'y',
          tension: 0.4,
        }
      ]   
    },
    options: {
    scales: {
        y: {
        beginAtZero: true
        }
    }
    }
});
let count = 0;
var e = document.getElementById("TenDanhSach");
var x = 2011;
function onChange() {
  var x = Number(e.value);
    document.getElementById(id="myP").innerText = "BẢNG KẾT QUẢ DỰ BÁO NĂM" + " " + e.value ;
    if (count % 2 == 0){
        myChar.destroy();
        document.getElementById("predictChart").style.background = "white";
        console.log("change color")
    }
    data_year = myFunction(ls,x);
    // closePopup_predict();
    
};

let data_year = myFunction(ls,x) ;
const bar_predict = document.getElementById('predictChart'); 
var myChar = new Chart(bar_predict, {
    type: 'bar',
    data: {
    labels: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'],
    datasets: [{
        axis: 'y',
        label: 'Lưu Lượng Nước m3/s',
        data : data_year ,
        fill: false,
        }]   
    },
    options: {
    scales: {
        y: {
        beginAtZero: true
        }
    }
    },
});

function closePopup_predict() { 
    document.getElementById("content_predict").style.display = "none"; }
function openPopup_predict() {
    count += 1;
    console.log(count); 
    document.getElementById("content_predict").style.display = "block";
    e.onchange = onChange;
    onChange();
    document.getElementById("predictChart").style.background = "#f3fff4";
    myChar = new Chart(bar_predict, {
        type: 'bar',
        data: {
        labels: ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'],
        datasets: [{
            axis: 'y',
            label: 'Lưu Lượng Nước m3/s',
            data : data_year ,
            fill: false,
            }]   
        },
        options: {
        scales: {
            y: {
            beginAtZero: true
            }
        }
        },
    });
    
 };






